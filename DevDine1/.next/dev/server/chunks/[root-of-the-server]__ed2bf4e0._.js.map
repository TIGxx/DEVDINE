{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///C:/Devdinev1/app/api/send-otp/route.ts"],"sourcesContent":["import { type NextRequest, NextResponse } from \"next/server\"\n\n// In-memory storage for OTPs (in production, use Redis or database)\nconst otpStore = new Map<string, { code: string; expires: number }>()\n\nexport async function POST(request: NextRequest) {\n  try {\n    const { email } = await request.json()\n\n    if (!email || !email.includes(\"@\")) {\n      return NextResponse.json({ error: \"Valid email is required\" }, { status: 400 })\n    }\n\n    // Generate a 6-digit OTP\n    const otp = Math.floor(100000 + Math.random() * 900000).toString()\n\n    // Store OTP with 5-minute expiration\n    otpStore.set(email, {\n      code: otp,\n      expires: Date.now() + 5 * 60 * 1000, // 5 minutes\n    })\n\n    // In production, send email via service like Resend, SendGrid, etc.\n    // For now, we'll just log it and return it (for demo purposes)\n    console.log(`[v0] OTP for ${email}: ${otp}`)\n\n    return NextResponse.json({\n      success: true,\n      message: \"OTP sent successfully\",\n      // Remove this in production - only for demo\n      otp: otp,\n    })\n  } catch (error) {\n    console.error(\"[v0] Error sending OTP:\", error)\n    return NextResponse.json({ error: \"Failed to send OTP\" }, { status: 500 })\n  }\n}\n\nexport async function PUT(request: NextRequest) {\n  try {\n    const { email, otp } = await request.json()\n\n    if (!email || !otp) {\n      return NextResponse.json({ error: \"Email and OTP are required\" }, { status: 400 })\n    }\n\n    const stored = otpStore.get(email)\n\n    if (!stored) {\n      return NextResponse.json({ error: \"OTP not found or expired\" }, { status: 400 })\n    }\n\n    if (Date.now() > stored.expires) {\n      otpStore.delete(email)\n      return NextResponse.json({ error: \"OTP has expired\" }, { status: 400 })\n    }\n\n    if (stored.code !== otp) {\n      return NextResponse.json({ error: \"Invalid OTP\" }, { status: 400 })\n    }\n\n    // OTP is valid, remove it\n    otpStore.delete(email)\n\n    return NextResponse.json({\n      success: true,\n      message: \"OTP verified successfully\",\n    })\n  } catch (error) {\n    console.error(\"[v0] Error verifying OTP:\", error)\n    return NextResponse.json({ error: \"Failed to verify OTP\" }, { status: 500 })\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA;;AAEA,oEAAoE;AACpE,MAAM,WAAW,IAAI;AAEd,eAAe,KAAK,OAAoB;IAC7C,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEpC,IAAI,CAAC,SAAS,CAAC,MAAM,QAAQ,CAAC,MAAM;YAClC,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA0B,GAAG;gBAAE,QAAQ;YAAI;QAC/E;QAEA,yBAAyB;QACzB,MAAM,MAAM,KAAK,KAAK,CAAC,SAAS,KAAK,MAAM,KAAK,QAAQ,QAAQ;QAEhE,qCAAqC;QACrC,SAAS,GAAG,CAAC,OAAO;YAClB,MAAM;YACN,SAAS,KAAK,GAAG,KAAK,IAAI,KAAK;QACjC;QAEA,oEAAoE;QACpE,+DAA+D;QAC/D,QAAQ,GAAG,CAAC,CAAC,aAAa,EAAE,MAAM,EAAE,EAAE,KAAK;QAE3C,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;YACT,4CAA4C;YAC5C,KAAK;QACP;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,2BAA2B;QACzC,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAqB,GAAG;YAAE,QAAQ;QAAI;IAC1E;AACF;AAEO,eAAe,IAAI,OAAoB;IAC5C,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEzC,IAAI,CAAC,SAAS,CAAC,KAAK;YAClB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA6B,GAAG;gBAAE,QAAQ;YAAI;QAClF;QAEA,MAAM,SAAS,SAAS,GAAG,CAAC;QAE5B,IAAI,CAAC,QAAQ;YACX,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAA2B,GAAG;gBAAE,QAAQ;YAAI;QAChF;QAEA,IAAI,KAAK,GAAG,KAAK,OAAO,OAAO,EAAE;YAC/B,SAAS,MAAM,CAAC;YAChB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAkB,GAAG;gBAAE,QAAQ;YAAI;QACvE;QAEA,IAAI,OAAO,IAAI,KAAK,KAAK;YACvB,OAAO,gJAAY,CAAC,IAAI,CAAC;gBAAE,OAAO;YAAc,GAAG;gBAAE,QAAQ;YAAI;QACnE;QAEA,0BAA0B;QAC1B,SAAS,MAAM,CAAC;QAEhB,OAAO,gJAAY,CAAC,IAAI,CAAC;YACvB,SAAS;YACT,SAAS;QACX;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,6BAA6B;QAC3C,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO;QAAuB,GAAG;YAAE,QAAQ;QAAI;IAC5E;AACF","debugId":null}}]
}